<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <span>账号</span>
      <input id="user" type="text" />
    </div>
    <div>
      <span>密码</span>
      <input id="pwd" type="password" />
    </div>
    <div><input id="rememberCheckBox" type="checkbox" />记住密码？</div>
    <button id="loginBtn">登录</button>
    <script>
      const user = document.getElementById("user");
      const pwd = document.getElementById("pwd");
      const loginBtn = document.getElementById("loginBtn");
      const rememberCheckBox = document.getElementById("rememberCheckBox");

      recover();

      function recover() {
        const str = localStorage.getItem("remember");
        if (Boolean(str)) {
          const data = JSON.parse(str);
          user.value = data.user;
          pwd.value = data.pwd;
        }
      }

      loginBtn.onclick = function () {
        // 获取账号密码
        const checked = rememberCheckBox.checked;
        const userValue = user.value;
        const pwdValue = pwd.value;
        const o = {
          user: userValue,
          pwd: pwdValue,
        };
        if (checked) {
          // 账号密码存到 localstorage 中
          // 将 JSON 对象转成字符串再存到localStorage 中
          localStorage.setItem("remember", JSON.stringify(o));
        } else {
          // 删除localstorage 中的账号密码
          localStorage.removeItem("remember");
        }
        alert("登录成功");
      };
    </script>
  </body>
</html>
